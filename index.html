<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Φ Sphere Packing Lab — 3D (WebGL)</title>
  <meta name="description" content="Explore φ-scaled sphere packing with hinged links and adjacent-only snapping." />
  <style>
    :root { --bg:#0f1220; --fg:#e8eefc; --muted:#9bb1ff; --line:#202645; --pill:#2a315d; }
    html, body { height: 100%; }
    body { margin: 0; font-family: system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif;
           background: var(--bg); color: var(--fg); }
    header { position: sticky; top: 0; z-index: 5; display: flex; flex-wrap: wrap; gap: 10px;
             align-items: center; padding: 10px 12px; border-bottom: 1px solid var(--line); background: #0c1020; }
    header .group { display: flex; gap: 8px; align-items: center; }
    header label { font-size: 13px; color: var(--muted); }
    select, button, input[type="range"] {
      background:#161a2e; color:var(--fg); border:1px solid #29305a; border-radius:6px; padding:6px 8px; font-size:14px;
    }
    button.primary { border-color: #3b67ff; }
    #diag { padding: 8px 12px; font-size: 13px; }
    #mode { display:inline-block; padding:2px 8px; border:1px solid var(--pill); border-radius:999px; font-size:12px; margin-left:6px; }
    #viewport { position: relative; min-height: 640px; height: 90vh; border-top: 1px solid var(--line);
                background: radial-gradient(ellipse at top, #161a2e, #0b0f1f 60%); }
    canvas { position: absolute; inset: 0; width: 100%; height: 100%; display: block; }
    footer { padding: 10px 12px; border-top:1px solid var(--line); color: #9fb3ff; font-size: 12px; }
  </style>
</head>
<body>
  <header>
    <div class="group">
      <label>Φ exponent</label>
      <select id="exp"></select>
      <button id="add" class="primary">Add sphere</button>
      <button id="addSet">Add φ→φ⁻⁹ set</button>
      <button id="clear">Clear</button>
    </div>
    <div class="group">
      <label><input type="checkbox" id="magnet" checked /> Magnetism</label>
      <label>Snap tol</label>
      <input id="snap" type="range" min="0" max="1" step="0.005" value="0.06" />
      <span id="snapv">0.06</span>
    </div>
    <div class="group">
      <span id="mode">Mode: WebGL 3D</span>
    </div>
  </header>

  <div id="diag"></div>
  <div id="viewport"></div>

  <footer>
    Hinged links • Adjacent-only snapping (|Δφ exponent| = 1) • Drag to move spheres • Drag background to orbit • Wheel to zoom
  </footer>

  <!-- Three.js + controls from CDN -->
  <script type="module" src="app.js"></script>
</body>
</html>
